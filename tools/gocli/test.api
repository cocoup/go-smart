syntax = "v1"

info (
    author : "leo"
    data: "2022-06-26"
    desc: "测试api"
)

/* -------------- */
type (
    UserReq {
        C string `json:"c"`
    }

    UserResp {
        Name string `json:"name"`
    }
)

@server(
    prefix: v1
    jwt: JwtAuth
    group: user
    anotherKey: anotherValue
)
service user-center {
    @handler userInfo
    get /info/:id returns (UserResp)

    @handler updateUser
    post / (UserReq)
}

/* -------------- */
type (
    NetTimeReq {

    }
    NetTimeResp {
        Time int64 `json:"time"`
    }
)

@server(
    prefix: v1
    group: logic
    abckey: abcval
)
service user-center {
    @handler netTime
    post /nettime (NetTimeReq) returns (NetTimeResp)
}

/* -------------- */
type (
    Order {
        Desc string     `json:"desc"`
        Price float32   `json:"price"`
    }
    OrderReq {
        Channel string  `json:"channel"`
        PID string      `json:"pid"`
    }
    OrderResp {
        OrderInfo Order `json:"orderInfo"`
    }
)

@server(
    prefix: v1
    group: pay
    anotherKey: anotherValue
    middleware: JwtAuth, abc
)
service user-center {
    @handler getOrder
    get /order (OrderReq) returns (OrderResp)

    @handler checkOrder
    post /check returns (OrderResp)
}